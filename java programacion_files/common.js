var emCommonTools={options:{cookies:false,footer:false},active:0,style:4,domains:["https:\/\/cloud.educa.madrid.org\/"],msg:'<p>Los usuarios que no tengan asignación completa de sus grupos en Raíces pueden experimentar dificultades al encontrar usuarios con los que compartir, pero todos los profesores pueden compartir mediante enlace externo.<br />Esta anomalía irá desapareciendo según se completen estas asignaciones en Raíces.</p>',cookiesMsg:{normal:'',framed:''},cookieName:"EducaMadrid_Tmp_Warning",expires:1,cookieDomain:".madrid.org",baseURL:'https://avisos.educa.madrid.org/public/',cookieToolURL:'https://www.educa2.madrid.org/educamadrid/js/cookietool/manager/js/educamadrid.js?v=20230903',debug:0,lssiCookieName:'EducaMadrid_LSSI_Cookies',lssiExpires:30,cssLoaded:false,init:function(){if(typeof(emRequiresCookies)=='boolean'&&emRequiresCookies==true)this.options.cookies=true;if(typeof(emCommonToolsOptions)=='object'){if(emCommonToolsOptions.cookies&&emCommonToolsOptions.cookies==true)this.options.cookies=true;if(emCommonToolsOptions.footer){var f=emCommonToolsOptions.footer;if(f=="white"||f=="dark"||f=="black")this.options.footer=f;else if(f==true)this.options.footer="white";}}
if(this.cssLoaded)emCommonToolsHandleInit();else this.loadScript(this.baseURL+"news/css/common.css?v=20230904","emCommonToolsHandleInit");},handleInit:function(){this.checkOrigin();this.cssLoaded=true;if(this.options.footer!=false)this.footer();this.toolbar.init();setTimeout(function(){emCommonTools.browserCheck.init();},1500);this.checkActivity.init();var domains=this.domains;var active=false;if(domains.length>0){var currURL=window.location.href;for(var i=0;i<domains.length;i++){var domain=domains[i];if(currURL.indexOf(domain)==0||domain=="Plataforma"||(domain=="Portal"&&document.domain.indexOf(".madrid.org")!=-1&&typeof(Liferay)=='object')){active=true;}else{var dP=domain.split("*");if(dP.length==2){if(currURL.indexOf(dP[0])==0){var uP=currURL.replace(dP[0],"");uP=uP.replace(".","~");uP=uP.split("~");uP="."+uP[1];if(uP.indexOf(dP[1])==0){uP=currURL.replace(dP[0],"");uP=uP.split(".");uP=uP[0];if(!isNaN(uP))active=true;}}}}}}
if(active==false){this.active=false;}
if(!this.active){this.deleteWarningCookie();if(this.options.cookies){this.checkLSSIcookies();}
return;}
emCommonTools.handleMessages();},checkOrigin:function(){if(document&&typeof(document.domain)=="string"){const dom=document.domain;if(dom!=""&&(!dom.match(".madrid.org$")&&dom!="localhost")){try{var i=document.createElement('img');i.width="1";i.height="1";i.src='https://avisos.educa.madrid.org/public/news/img/tracker.png?url='+encodeURI(window.location.href);i.style.display='none';document.body.appendChild(i);}catch(e){}}}},checkLSSIcookies:function(){var c=emCommonTools.getCookie(emCommonTools.lssiCookieName);if(!c||c=="-1"||window.location.href.indexOf("https://www.educa2.madrid.org/educamadrid/politica-de-cookies")==0){this.loadScript(this.cookieToolURL);}else{if(this.active)this.messages.init();if(c&&c!="2")this.loadScript(this.cookieToolURL);}},handleMessages:function(){if(this.options.cookies){this.checkLSSIcookies();}else{this.messages.init();}
if(this.debug==true)this.dev.start();},getHelpLink:function(){var l="https://documentacion.educa.madrid.org/"
var d=document.domain;if(typeof(d)!='string'||d==""||d.indexOf(".madrid.org")==-1)return l;if(d.indexOf("aulavirtual")==0||d.indexOf("formacion.")==0)l+="shelves/aula-virtual";else if(d.indexOf("cloud.")==0||d.indexOf("cloud2.")==0)l+="books/cloud";else if(d.indexOf("correoweb.")==0)l+="shelves/correo";else if(d.indexOf("formularios.")==0)l+="books/formularios---limesurvey";else if(d.indexOf("mediateca.")==0)l+="shelves/mediateca";else if(d.indexOf("site.")==0)l+="shelves/web-de-centro";else if(d.indexOf("portalcau.")==0)l+="books/portalcau";else if(d.indexOf("jitsi.")==0)l+="books/videoconferencia";return l;},footer:function(){var f=this.options.footer;var k="";var iA="ce";var iB="em";if(f=="dark"){k="emCommonFooterDark";iA=f+"/"+iA;iB=f+"/"+iB;}else if(f=="black"){k="emCommonFooterDark emCommonFooterBlack";iA=f+"/"+iA;iB=f+"/"+iB;}
var c='\<div id="emCommonFooterContent"><p id="emCommonFooterCopyright"><a href="https://www.educa2.madrid.org/educamadrid/"><strong>EducaMadrid</strong></a><span class="emCommonFooterSep"><span> - </span></span>Consejería de Educación, Ciencia y Universidades<span class="emCommonFooterSep"><span> - </span></span><a id="emCommonFooterHelpLnk" href="'+this.getHelpLink()+'" target="_blank" rel="noopener" title="Documentación de EducaMadrid">Ayuda<span> (en ventana nueva)</span></a><span id="emCommonFooterLogos"><a href="https://www.comunidad.madrid/servicios/educacion" title="Comunidad de Madrid"><img src="https://avisos.educa.madrid.org/public/logos/footer/'+iA+'.png?v=202307" width="131" height="38" alt="Consejería de Educación, Ciencia y Universidades"/></a><a href="https://www.educa2.madrid.org/educamadrid/" title="EducaMadrid"><img src="https://avisos.educa.madrid.org/public/logos/footer/'+iB+'.png?v=202307" width="131" height="38" alt="EducaMadrid, Plataforma Educativa"/></a><span id="emCommonFooterLogos20" title="20 aniversario de EducaMadrid"><span>EducaMadrid ha cumplido 20 años</span></span></span></p></div>';var w=jQuery("#emCommonFooter");if(w.length==1){w.attr("class",k).html(c);return;}
jQuery("body").append('<div id="emCommonFooter" class="'+k+'">'+c+'</div>');},messages:{header:'<h2>Aviso importante</h2> <a href="#" id="emCommonMessageBtnClose" title="Cerrar">×<span> Cerrar el aviso</span></a> <p id="emCommonMessageLogo"><img src="%s" alt="EducaMadrid Plataforma Educativa" width="262" height="76" /></p>',footer:'<p class="emCommonMessageBtns"><a href="#" class="emCommonMessageBtn" id="emCommonMessageBtn">Aceptar</a></p>',getAddr:function(){var eA=[99,97,117,64,101,100,117,99,97,46,109,97,100,114,105,100,46,111,114,103];var e='';for(var i=0;i<eA.length;i++)e+=String.fromCharCode(eA[i])
return'<a href="mailto:'+e+'">'+e+'</a>';},processMsg:function(v){var sep=" -&gt; ";var msg=v;msg=msg.replace("<p>","");msg=msg.replace("</p>","");msg=msg.trim();msg=msg.replace("cau arroba educa.madrid.org",this.getAddr());if(msg.indexOf(sep)!=-1){var def="";var spe="";var parts=msg.split("<br /><br />");for(var i=0;i<parts.length;i++){var part=parts[i];if(part.indexOf(sep)==-1){def=part;}else{var dom=document.domain;var pts=part.split(sep);if(pts.length==2){var pt=pts[0];pt=pt.trim();if(pt!="apps"&&pt!="appCloud"&&pt!="appMoodle"){if(window.location.href.indexOf(pt)==0||dom.indexOf(pt)!=-1){spe=pts[1];}}}}}
if(spe!="")msg=spe;else if(def!="")msg=def;else msg="";msg=msg.trim();msg=msg.replace("<br />","<br /><br />");}
if(msg!="")msg='<p>'+msg+'</p>';return msg;},init:function(){var c=emCommonTools.getCookie(emCommonTools.cookieName);if(c&&c==1)return;var msg=emCommonTools.msg;msg=emCommonTools.messages.processMsg(msg);if(msg=='')return;if(jQuery("#emCommonMessageWrapper").length==0){if(jQuery("body").hasClass("em-dark-mode"))emCommonTools.style=0;jQuery("body").prepend('<div id="emCommonMessageWrapper" class="emCommonMessageStyle'+emCommonTools.style+'"></div>');}
var header=this.header;header=header.replace("%s",emCommonTools.baseURL+"logos/footer/em.png");var msgF=this.footer;var s=emCommonTools.style;if(s==1||s==4||s==5)msgF=msgF.replace("Aceptar","Entendido");msg=header+msg+msgF;jQuery("html").addClass("emCommonMessageVisible");jQuery("#emCommonMessageWrapper").html('<div id="emCommonMessage">'+msg+'</div>').show();jQuery("#emCommonMessageBtnClose").click(function(){jQuery("#emCommonMessageWrapper").hide();jQuery("html").removeClass("emCommonMessageVisible");return false;});jQuery("#emCommonMessageBtn").click(function(){emCommonTools.setCookie(1);jQuery("#emCommonMessageWrapper").hide();jQuery("html").removeClass("emCommonMessageVisible");return false;});}},pass:{init:function(){var u='https://www.educa2.madrid.org/educa-users/expired.jsp';if(document.domain=="correoweb.educa.madrid.org"||document.domain=="correowebpre16.educa.madrid.org"){var a=jQuery("#login-form");var b=jQuery("#rcmloginuser");var c=jQuery("#rcmloginsubmit");if(a.length==1&&b.length==1&&c.length==1){a.submit(function(){var user=b.val();if(user!=""){try{jQuery.ajax({'url':u,'timeout':4000,'dataType':'json','data':{'user':user},'async':false,'success':function(m){if(typeof(m)!='undefined'&&typeof(m.expired)!='undefined'){if(m.expired==true){jQuery("#rcmloginsubmit").hide().before('<div class="alert alert-warning text-center" style="margin-top:.65em"><strong>Contraseña caducada.</strong><br />Para cambiarla: <a href="https://www.educa2.madrid.org/principal?p_p_id=58&amp;p_p_lifecycle=0&amp;p_p_state=maximized&amp;p_p_mode=view&amp;p_p_col_id=column-1&amp;p_p_col_count=2&amp;_58_struts_action=%2Flogin%2Fforgot_password" class="alert-link" style="text-decoration:underline">profesores</a>, <a href="https://ayuda.educa.madrid.org/books/alumnos-y-familias/page/usuarios#bkmrk-credenciales" class="alert-link" style="text-decoration:underline">alumnos</a>.</div>');jQuery("div.loading").hide();return false;}
jQuery("#login-form").unbind("submit").submit();}},'error':function(){jQuery("#login-form").unbind("submit").submit();}});}catch(e){}}
return false;});}}
else if(window.location.href.indexOf("https://cloud.educa.madrid.org/index.php/login")==0){validateEMCloudLoginForm=true;emCloudLoginForm=jQuery("#cloud form[name='login']");emCloudLoginForm.submit(function(){var uF=document.getElementById('user');if(uF&&uF.value){var val=uF.value;val=val.split("@");val=val[0];if(val=="")return false;uF.value=val;if(validateEMCloudLoginForm==false)return true;jQuery.ajax({'url':'https://www.educa2.madrid.org/educa-users/expired.jsp','timeout':4000,'dataType':'json','data':{'user':uF.value},'async':false,'success':function(m){if(typeof(m)!='undefined'&&typeof(m.expired)!='undefined'){if(m.expired==true){jQuery("p.alert").remove();jQuery("#cloud form[name='login']").before('<p class="alert alert-danger"><i class="fa fa-warning fa-fw" aria-hidden="true"></i> <strong>Contraseña caducada.</strong> Para cambiarla: <a href="https://www.educa2.madrid.org/principal?p_p_id=58&amp;p_p_lifecycle=0&amp;p_p_state=maximized&amp;p_p_mode=view&amp;p_p_col_id=column-1&amp;p_p_col_count=2&amp;_58_struts_action=%2Flogin%2Fforgot_password" class="alert-link">profesores</a>, <a href="https://ayuda.educa.madrid.org/books/alumnos-y-familias/page/usuarios#bkmrk-credenciales" class="alert-link">alumnos</a>.</p>');return false;}}
validateEMCloudLoginForm=false;emCloudLoginForm.submit();},'error':function(){validateEMCloudLoginForm=false;emCloudLoginForm.submit();}});if(validateEMCloudLoginForm==true){return false;}}else{return true;}});}
else if(document.domain=="mediateca.educa.madrid.org"){jQuery("#login-form").submit(function(){var user="";var field=jQuery("#nombreuser");if(field.length==1){user=field.val().split("@")[0];field.val(user);}
if(user!=""){jQuery.ajax({'url':u,'timeout':4000,'dataType':'json','data':{'user':user},'async':false,'success':function(m){if(typeof(m)!='undefined'&&typeof(m.expired)!='undefined'){if(m.expired==true){jQuery("#login-form").html('<p class="msg error-msg"><strong>Contraseña caducada.</strong></p><p>Para cambiarla: <a href="https://www.educa2.madrid.org/principal?p_p_id=58&amp;p_p_lifecycle=0&amp;p_p_state=maximized&amp;p_p_mode=view&amp;p_p_col_id=column-1&amp;p_p_col_count=2&amp;_58_struts_action=%2Flogin%2Fforgot_password">profesores</a>, <a href="https://ayuda.educa.madrid.org/books/alumnos-y-familias/page/usuarios#bkmrk-credenciales">alumnos</a>. <a href="#login" onclick="window.location.reload();return false">Cancelar</a></p>');return false;}
jQuery("#login-form").unbind("submit").submit();}},'error':function(){jQuery("#login-form").unbind("submit").submit();}});return false;}});}
else if(typeof(emMoodle)=='object'&&jQuery("body").attr("id")=='page-login-index'){var a=jQuery("form#login");var b=jQuery("#username");var c=jQuery("#loginbtn");var d=jQuery("div.login-wrapper");if(a.length==1&&b.length==1&&c.length==1&&d.length==1){a.submit(function(){var user=b.val();if(user!=""){jQuery.ajax({'url':u,'timeout':4000,'dataType':'json','data':{'user':user},'async':false,'success':function(m){if(typeof(m)!='undefined'&&typeof(m.expired)!='undefined'){if(m.expired==true){jQuery("div.rememberpass").hide();jQuery("#loginbtn").hide()
jQuery("form#login").before('<div class="alert alert-warning"><strong>Contraseña caducada.</strong><br />Para cambiarla: <a href="https://www.educa2.madrid.org/principal?p_p_id=58&amp;p_p_lifecycle=0&amp;p_p_state=maximized&amp;p_p_mode=view&amp;p_p_col_id=column-1&amp;p_p_col_count=2&amp;_58_struts_action=%2Flogin%2Fforgot_password" class="alert-link" style="text-decoration:underline">profesores</a>, <a href="https://ayuda.educa.madrid.org/books/alumnos-y-familias/page/usuarios#bkmrk-credenciales" class="alert-link" style="text-decoration:underline">alumnos</a>.</div>');return false;}
jQuery("form#login").unbind("submit").submit();}},'error':function(){jQuery("form#login").unbind("submit").submit();}});}
return false;});}}}},checkActivity:{timeout:(typeof(document.domain)=='string'&&document.domain=='correowebpre16.educa.madrid.org')?2:60,counter:0,init:function(){if(!document.domain||(document.domain!="correowebpre16.educa.madrid.org"&&document.domain!="correoweb.educa.madrid.org"))return;if(typeof(jQuery)!='function'||jQuery!=$)return;if(typeof(document.addEventListener)!="function")return;if(jQuery("a[href='./?_task=logout']").length!=1)return;setInterval(emCommonTools.checkActivity.startTimer,10000);var activityEvents=['mousedown','mousemove','keydown','scroll','touchstart','click'];activityEvents.forEach(function(eventName){document.addEventListener(eventName,function(evt){emCommonTools.checkActivity.resetCounter(evt);},true);});},warn:function(){clearInterval(emCommonTools.checkActivity.warnInterval);emCommonTools.style=0;emCommonTools.msg='La sesión se cerrará en <span id="emCommonMessageCounter">60</span> segundos si no se detecta actividad.';emCommonTools.messages.init();jQuery("#emCommonMessage h2").text("Aviso por inactividad").css("text-align","center");jQuery("#emCommonMessage p").css("text-align","center");emCommonTools.checkActivity.warnInterval=setInterval(function(){var e=jQuery("#emCommonMessageCounter");var n=e.text();n=parseInt(n);n=n-1;if(n<0)n=0;e.text(n);if(n==0){setTimeout(function(){try{jQuery("a[href='./?_task=logout']").trigger("click");}catch(e){}},950);}},1000);jQuery("#emCommonMessage .emCommonMessageBtns,#emCommonMessageBtnClose").remove();},startTimer:function(){emCommonTools.checkActivity.counter+=1;if(emCommonTools.checkActivity.counter>=(emCommonTools.checkActivity.timeout*6-6)){if(!jQuery("#emCommonMessageCounter").is(":visible"))emCommonTools.checkActivity.warn();}},resetCounter:function(evt){var v=jQuery("#emCommonMessageCounter").is(":visible");if(v&&evt&&typeof(evt.type)=='string'&&evt.type=="mousemove")return false;if(v)jQuery("#emCommonMessageWrapper").hide();clearInterval(emCommonTools.checkActivity.warnInterval);emCommonTools.checkActivity.counter=0;}},browserCheck:{init:function(){if(!document||!document.domain)return;var dom=document.domain;if(!dom.match(".madrid.org$"))return;var isIE=false;var isIE11=false;if(document.documentMode){isIE=true;if(!!window.MSInputMethodContext&&!!document.documentMode)isIE11=true;}
if(isIE&&!isIE11){window.location.href="https://www.educa2.madrid.org/educamadrid/navegador-incompatible";return;}
if(isIE){if(dom.indexOf("jitsi")!=-1||(typeof(M)=='object'&&typeof(emMoodleHead)=='object')){emCommonTools.browserCheck.msg("incompatible");}else{emCommonTools.browserCheck.msg("old");}
return;}},msg:function(type){var title="Navegador incompatible";var msg='<p><strong>%s</strong> Te recomendamos actualizarlo. <a href="https://www.educa2.madrid.org/educamadrid/navegador-incompatible" target="_blank" rel="noopener">M&aacute;s informaci&oacute;n</a>.</p><p><img src="'+emCommonTools.baseURL+'news/img/icons/browser-logos.png" alt="Logotipos de diferentes navegadores web" width="1000" height="193" /></p><p>Los navegadores antiguos son menos seguros, y en ellos no funcionar&aacute;n todas las aplicaciones de EducaMadrid.</p>';if(type=='old'){title="Actualizaci&oacute;n recomendada";msg=msg.replace('%s','Tu navegador es antiguo.');}else{msg=msg.replace('%s','Tu navegador no es compatible con este servicio.');}
jQuery("html").addClass("emCommonMessageVisible");jQuery("body").prepend('<div id="emCommonMessageWrapper2"><div id="emCommonMessage2"><h2>'+title+'</h2> <a href="#" id="emCommonMessageBtnClose2" title="Cerrar">×<span> Cerrar el aviso</span></a>'+msg+'</div></div>');jQuery("#emCommonMessageBtnClose2").click(function(){jQuery("html").removeClass("emCommonMessageVisible");jQuery("#emCommonMessageWrapper2").remove();return false;});}},dev:{start:function(){var html='<div id="emCTdebugger"><span id="emCTdebuggerIframeWrapper"></span><input type="button" value="Borrar cookies" id="emCdeleteCookies" /><input type="button" value="Activar mensaje" id="emCenableWarning" /></div>';jQuery("body").append(html);var project="";var ref=window.location.href;ref=ref.split("?project=");if(ref.length==2)project=ref;jQuery("#emCdeleteCookies").click(function(){var isEduca1=document.domain.indexOf(".educa.madrid.org")!=-1;var isEduca2=document.domain.indexOf(".educa2.madrid.org")!=-1;var isEduca3=document.domain.indexOf("centrosdeformacion.empleo.madrid.org")!=-1;if(!isEduca1&&!isEduca2&&!isEduca3)return false;emCommonTools.currentDomain='.educa.madrid.org';emCommonTools.iframeA='https://www.educa2.madrid.org/educamadrid/js/cookietool/';emCommonTools.iframeB='https://cftic.centrosdeformacion.empleo.madrid.org/educamadrid-tools/cookietool/';if(isEduca2){emCommonTools.currentDomain='.educa2.madrid.org';emCommonTools.iframeA='https://avisos.educa.madrid.org/public/cookietool/';emCommonTools.iframeB='https://cftic.centrosdeformacion.empleo.madrid.org/educamadrid-tools/cookietool/';}
var level="-1";emCommonTools.levelToSave=level;var other=jQuery("<iframe id='emCookieFrame' src='"+emCommonTools.iframeA+"?cookies="+level+"' width='100' height='100' style='display:none'></iframe>");var wrapperID="emCTdebuggerIframeWrapper";jQuery("#"+wrapperID).append(other);emCommonTools.deleteLSSICookie();var f=document.getElementById("emCookieFrame");if(f)f.onload=function(){this.src=emCommonTools.iframeB+"?cookies="+emCommonTools.levelToSave;this.onload=function(){window.location.reload();}}});jQuery("#emCenableWarning").click(function(){emCommonTools.deleteWarningCookie();window.location.reload();});}},deleteWarningCookie:function(){var c=emCommonTools.getCookie(emCommonTools.cookieName);if(c&&c==1){document.cookie=emCommonTools.cookieName+'=; path=/; domain='+emCommonTools.cookieDomain+'; expires='+new Date(0).toUTCString();}},deleteLSSICookie:function(){var date=new Date();date.setTime(date.getTime()+(this.lssiExpires*24*60*60*1000));document.cookie=this.lssiCookieName+'=; path=/; domain='+this.currentDomain+'; expires='+date.toUTCString();},setCookie:function(value){var domain=this.cookieDomain;var days=this.expires;var expires;var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();document.cookie=this.cookieName+"="+value+expires+"; path=/; domain="+domain;},getCookie:function(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return null;},loadScript:function(url,callback){var script;var tmp=url;tmp=tmp.split("?");tmp=tmp[0];if(tmp.split('.').pop()=="css"){script=document.createElement("link");script.type="text/css";script.rel="stylesheet";script.href=url;}else{script=document.createElement("script");script.type="text/javascript";script.src=url;}
if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;if(callback)window[callback]();}};}else{script.onload=function(){if(callback)window[callback]();};}
document.getElementsByTagName("head")[0].appendChild(script);}}
if(typeof(jQuery)=='function'){jQuery(function(){emCommonTools.init();});function emCommonToolsHandleInit(){emCommonTools.handleInit();};}else{function emCommonToolsHandleInit(){emCommonTools.checkOrigin();};}
var emIs20={init:function(){if(document.domain.indexOf(".madrid.org")==-1||emIs20.inIframe()||emIs20.getCookie("em20yearsDisabled")=="1")return;var html='<div id="em20years"><img src="https://avisos.educa.madrid.org/public/news/tmp/em-02-22.png" width="117" height="100" alt="20 aniversario de EducaMadrid" title="¡EducaMadrid ha cumplido 20 a&ntilde;os!"><a href="#" title="Ocultar"><span>Ocultar la imagen del 20 aniversario</span></a>';jQuery("body").append(html);var k=document.domain;k=k.split(".");k=k[0];jQuery("#em20years a").click(function(){jQuery("#em20years").fadeOut("slow",function(){emIs20.removeLogo(this);});return false;});jQuery("#em20years").attr("class","em20-"+k).fadeIn("slow").click(function(){jQuery(this).fadeOut()});},removeLogo:function(e){if(e)jQuery(e).remove();var today=new Date();var expire=new Date();expire.setTime(today.getTime()+3600000*24*7);document.cookie="em20yearsDisabled=1;domain=.madrid.org; path=/; expires="+expire.toGMTString();},inIframe:function(){try{return window.self!==window.top;}catch(e){return true;}},getCookie:function(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";}}
emCommonTools.toolbar={searchbox:window.location.href.indexOf("?searchbox=false")!=-1?false:true,done:false,cache:[],isMobile:function(){try{document.createEvent("TouchEvent");return true;}catch(e){return false;}},getUserMenu:function(){if(!emCommonToolsOptions.userMenu)return'';var toggler="Modo oscuro";if(jQuery("body").hasClass("em-dark-mode"))toggler="Modo claro";if(!emCommonToolsOptions.modeToggler)toggler="";else if(emCommonToolsOptions.modeToggler=="moodle")toggler='<li>[...]</li>';else toggler='<li><a href="#" id="emCommonUserMenuModeToggler">'+toggler+'</a></li>';return'<div id="emCommonUserMenu" class="emCommonUserMenu">   <ul class="emCommonUserMenuBtns">    <li><a href="#" id="emCommonUserMenuAccount">Mi cuenta</a></li>    <li><a href="#">Mi Centro</a></li>    <li><a href="#">Mi Aula Virtual</a></li>    <li><a href="#">Mis Clases</a></li>    <li><a href="#" id="emCommonUserMenuLogout">Cerrar sesión</a></li>    '+toggler+'   </ul>  </div>';},getModeToggler:function(){if(emCommonToolsOptions.userMenu)return'';var lnks='<strong>Modo: </strong><a href="'+window.location.href+'" id="emCommonModeToggler0" title="Modo claro"><span>claro</span></a><span>, </span><a href="'+window.location.href+'" id="emCommonModeToggler1" title="Modo oscuro"><span>oscuro</span></a>';if(emCommonToolsOptions.modeToggler==true)return'<div id="emCommonModeTogglerWrapper">'+lnks+'</div>';else if(emCommonToolsOptions.modeToggler=="moodle")return'<div id="emCommonModeTogglerWrapper">'+lnks+'<span>, </span><a href="'+window.location.href+'" id="emCommonModeToggler2" title="Alto contraste"><span>alto contraste</span></a></div>';return"";},getUserMenuLink:function(){if(emCommonToolsOptions.userMenu==true)return'<a href="#emCommonUserMenu" title="Mi cuenta" id="emCommonUserMenuToggler"><span>Mi cuenta</span></a>';return'';},init:function(){if(emCommonTools.toolbar.done)return;emCommonTools.toolbar.done=true;if(typeof(emCommonToolsOptions.toolbar)=='undefined')return;var toolbar=emCommonToolsOptions.toolbar;if(toolbar==false)return;if(0===0){var isTestURL=false;if(window.location.href.indexOf("emTesting=toolbar")!=-1)isTestURL=true;if(typeof(emMoodle)=='object'&&typeof(emMoodle.options)=='object'){if(!isTestURL&&window.location.href.indexOf("https://aulavirtualpre74desa.educa.madrid.org/moodle43/")!=0){emMoodle.options.toolbar=false;jQuery("body").removeClass("emMoodleCommonToolbarEnabled");try{emMoodle.highContrastTool.init()}catch(e){}
return;}}
if(window.location.href.indexOf("https://www.educa2.madrid.org/educamadrid/")==0||window.location.href.indexOf("http://localhost/consejeria/interfaz/web-estatica/toolbar/")==0){if(typeof(EducaMadridSite)=='object'){if(!isTestURL){emCommonToolsOptions.toolbar=false;if(!document.getElementById||!document.getElementById("emModeToggler")){var t="Modo oscuro";if(jQuery("body").hasClass("em-dark-mode")){t="Modo claro";jQuery("#buscadoraulavirtual").attr("src",EducaMadridSite.moodleSearch+"?mode=dark");}
jQuery("head").append('<style>@media (max-width: 1399.98px){.js #bs-example-navbar-collapse-1{padding-right:0}}</style>');jQuery("nav ul").append('<li><a href="'+window.location.href+'" id="emModeToggler" title="'+t+'"><span class="sr-only">Modo claro/oscuro</span></a></li>');jQuery("#emModeToggler").click(function(){var tool=jQuery("#buscadoraulavirtual");tool.hide();var footer=true;var dark="0";var url=EducaMadridSite.moodleSearch;if(jQuery("body").hasClass("em-dark-mode")){this.title="Modo oscuro";jQuery("body").removeClass("em-dark-mode");}else{this.title="Modo claro";jQuery("body").addClass("em-dark-mode");footer="black";dark="1";url+="?mode=dark";}
tool.attr("src",url).fadeIn();emCommonTools.options.footer=footer;emCommonTools.footer();document.cookie="emDarkModeOn="+dark+"; domain=.madrid.org";return false;});}
return;}}}
if(typeof(Liferay)=='object'){if(!isTestURL){return;}}
if(document.domain&&document.domain=="mediateca.educa.madrid.org"){if(!isTestURL){try{MediatecaOptions.darkMode.init()}catch(e){}
return;}}
var otherDomains=["login","empieza","cloud","documentacion","ayuda","correoweb","formularios","boletines","comparti2","portalcau","foros","emlab"];if(document.domain){var currDomain=document.domain;currDomain=currDomain.split(".");currDomain=currDomain[0];if(otherDomains.indexOf(currDomain)!=-1&&!isTestURL){return;}}}
if(toolbar!=true&&toolbar!="black"&&toolbar!="white")return;var extraCSS="";if(toolbar=="black")extraCSS=' class="emCommonMenuTogglerDark"';var hasSearchBar="";if(emCommonTools.toolbar.searchbox==false)hasSearchBar=" emCommonUserMenuNoSearch";var appLauncher='  <p id="emCommonMenuToggler"'+extraCSS+'>   '+this.getUserMenuLink()+'   <a href="#emCommonAppsMenu" title="Servicios de EducaMadrid" id="emCommonAppsMenuToggler"><span>Servicios de EducaMadrid</span></a>  </p>  '+this.getUserMenu()+'  <div id="emCommonAppsMenu" class="emCommonUserMenu'+hasSearchBar+'">   '+this.getModeToggler()+'   <div>    <h2>Servicios</h2>    <form action="./">    <p>     <label for="emCommonAppsMenuBrowser">Buscador de servicios de EducaMadrid</label>     <input type="text" id="emCommonAppsMenuBrowser" placeholder="Servicios de EducaMadrid">    </p>    </form>    <ul id="emCommonAppsMenuContent" class="emCommonAppsMenuDefault">'+this.getServices()+'</ul>   </div>  </div>';jQuery("body").addClass("emCommonToolbarEnabled").append(appLauncher);if(typeof(Liferay)=='object'&&jQuery("a#login-link").length==1&&jQuery("body").hasClass("signed-out")){jQuery('#emCommonAppsMenu').prepend('<div id="emCommonPortalLogin"><a href="#" id="emCommonPortalLoginLnk">Iniciar sesión</a></div>');jQuery("a#login-link").hide();jQuery("#emCommonPortalLoginLnk").click(function(){jQuery("a#login-link").trigger("click");return false;});}
jQuery("#emCommonAppsMenu form").on("submit",function(){return false;});jQuery(document).click(function(){jQuery('#emCommonUserMenu,#emCommonAppsMenu').hide();});jQuery('#emCommonUserMenu,#emCommonAppsMenu').click(function(event){event.stopPropagation();});if(!this.isMobile()){jQuery(window).resize(function(){emCommonTools.toolbar.resize();});}else{jQuery("body").addClass("emCommonToolsMobile");}
jQuery('#emCommonUserMenuToggler').click(function(event){var e=jQuery("#emCommonUserMenu");if(e.is(":visible")){e.hide();return false;}
jQuery("#emCommonAppsMenu").hide();e.show();return false;});jQuery('#emCommonAppsMenuToggler').click(function(event){var e=jQuery("#emCommonAppsMenu");if(e.is(":visible")){e.hide();return false;}
jQuery("#emCommonUserMenu").hide();e.show();jQuery("#emCommonAppsMenuBrowser").focus();emCommonTools.toolbar.resize();return false;});jQuery("#emCommonAppsMenuBrowser").val("").on("keyup",function(){emCommonTools.toolbar.search(this.value);});if(emCommonToolsOptions.modeToggler=="moodle"){try{emMoodle.toolbar.setEvents();}catch(e){jQuery("#emCommonUserModeTogglerWrapper").remove();}}else{jQuery("#emCommonModeToggler0").click(function(){var footer="white";var domain=".madrid.org";if(document.location.host=="localhost")domain="localhost";var dark=0;jQuery("body").removeClass("em-dark-mode");emCommonTools.options.footer=footer;document.cookie="emDarkModeOn="+dark+"; domain="+domain;emCommonTools.footer();if(typeof(EducaMadridSite)=='object'&&typeof(EducaMadridSite.moodleSearch)=='string'){jQuery("iframe#buscadoraulavirtual").attr("src",EducaMadridSite.moodleSearch);}
return false;});jQuery("#emCommonModeToggler1").click(function(){var footer="black";var domain=".madrid.org";if(document.location.host=="localhost")domain="localhost";var dark=1;jQuery("body").addClass("em-dark-mode");emCommonTools.options.footer=footer;document.cookie="emDarkModeOn="+dark+"; domain="+domain;emCommonTools.footer();if(typeof(EducaMadridSite)=='object'&&typeof(EducaMadridSite.moodleSearch)=='string'){jQuery("iframe#buscadoraulavirtual").attr("src",EducaMadridSite.moodleSearch+"?mode=dark");}
return false;});}
jQuery("#emCommonUserMenuModeToggler").click(function(){var footer="white";var domain=".madrid.org";if(document.location.host=="localhost")domain="localhost";var dark=0;if(jQuery("body").hasClass("em-dark-mode")){this.innerHTML="Modo oscuro";jQuery("body").removeClass("em-dark-mode");}else{dark=1;this.innerHTML="Modo claro";jQuery("body").addClass("em-dark-mode");footer="black";}
emCommonTools.options.footer=footer;document.cookie="emDarkModeOn="+dark+"; domain="+domain;emCommonTools.footer();return false;});if(typeof(emAppConstants)!="undefined"){jQuery("#emCommonUserMenuLogout").click(function(){window.location.href=emAppConstants.logout;});}},search:function(v){v=this.normalize(v);if(v==""){jQuery("#emCommonAppsMenuContent").addClass("emCommonAppsMenuDefault");jQuery("#emCommonAppsMenuContent li").each(function(i){var e=jQuery(this);var eHTML=e.html();eHTML=eHTML.replace("background-position:-50px ","background-position:0 ");e.html(eHTML);if(i>8)e.hide();else e.show();});return;}
jQuery("#emCommonAppsMenuContent").removeClass("emCommonAppsMenuDefault");jQuery("#emCommonAppsMenuContent li").hide();var arr=this.cache;for(var i=0;i<arr.length;i++){if(arr[i].indexOf(v)!=-1){var res=jQuery("#emCommonService"+i);var resHTML=res.html();resHTML=resHTML.replace("background-position:0 ","background-position:-50px ");res.html(resHTML).show();}}},resize:function(){var maxHeight=jQuery(window).height()-(jQuery('#emCommonAppsMenuContent').offset().top+21);if(jQuery("#emCommonMenuToggler").css("position")=='fixed')maxHeight=jQuery(window).height()-180;if(maxHeight>288)maxHeight=288;jQuery('#emCommonAppsMenuContent').css({maxHeight:maxHeight});},getServices:function(){var bgPositionOrigin=0;var html='';var services=[['EMPieza','extension','https://empieza.educa.madrid.org/','google portada drive classroom inicio buscador gestión de clases grupos mediateca correo aulas virtuales comparti2 gestión de grupos directos calendario'],["Portal","supervised_user_circle","https://www.educa2.madrid.org/web/educamadrid/","Webs y usuarios liferay usuarios educativo cms colaborativo webs de centro comunidades recursos"],["Aula Virtual","school","https://www.educa2.madrid.org/educamadrid/aula-virtual","Aulas Virtuales moodle clases lms calificaciones rúbricas evaluar notas"],["Mediateca","movie","https://mediateca.educa.madrid.org/","youtube slideshare prezi exelearning videos audios incrustar mapas documentos imágenes"],["Cloud","cloud","https://cloud.educa.madrid.org/","google drive almacenamiento nube ficheros gestor documentos"],["Correo","mail","https://correoweb.educa.madrid.org/","webmail email electrónico"],["Formularios","question_answer","https://formularios.educa.madrid.org/","google forms cuestionarios encuestas"],["Boletines","contact_mail","https://boletines.educa.madrid.org/","Generador de Boletines newsletters rss emailing campañas mailchimp"],["MAX","computer","https://www.educa2.madrid.org/web/max","linux ubuntu redhat windows mac sistema operativo so alternativa software libre"],["Recursos TIC","build","https://www.educa2.madrid.org/web/recursostic","materiales descarga libre abiertos creative commons programas software contenidos"],["Comparti2","get_app","https://comparti2.educa.madrid.org/","wetransfer google drive nube descargas enlaces documentos"],["Portal CAU","support_agent","https://portalcau.educa.madrid.org/","ayuda instrucciones soporte técnicos problemas reportar incidencias teléfono 900 atención al usuario"],["Documentación","help_center","https://documentacion.educa.madrid.org/","ayuda instrucciones soporte técnicos problemas reportar incidencias teléfono 900"],["Repositorio","style","https://aulavirtual35.educa.madrid.org/aulas/","descargar banco de recursos cursos gratuitos materiales compartir moodle aulas virtuales"],["Foros","chat","https://foros.educa.madrid.org/","foros ayuda apoyo usuarios compartir preguntas"],['EMLab','science','https://emlab.educa.madrid.org/','experimental laboratorio centros créditos testers probadores competencia digital docente premio concurso']];for(var i=0;i<services.length;i++){var service=services[i];var show="";if(i>8)show=' class="emCommonExtraService"';var bPos=' style="background-position:0 -'+bgPositionOrigin+'px"';bgPositionOrigin+=50;html+='<li id="emCommonService'+i+'"'+show+'><a href="'+service[2]+'" class="'+service[1]+'" target="_blank" rel="noopener"><i aria-hidden="true"'+bPos+'></i>'+service[0]+'</a><span class="emCommonServiceDesc">'+service[3]+'</span></li>';this.cache.push(service[2]+" "+this.normalize(service[0])+" "+this.normalize(service[3]));}
return html;},normalize:function(str){try{str=str.toLowerCase();str=str.normalize("NFD").replace(/[\u0300-\u036f]/g,"");}catch(e){}
return str;}}